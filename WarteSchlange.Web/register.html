<html>
    <head>
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

        <title>Registerd! - Please Wait</title>
        <link href="style.css" type="text/css" rel="stylesheet">
        
        <script type="application/javascript" src="qrcode.min.js"></script>
        
        <script>
            // Get QueueItemID
            var url_string = window.location.href;
            var url = new URL(url_string);
            var qItemID = url.searchParams.get("qItemID");
            //if(qItemID==null || qItemID=="") return;

            // API Request
            function makeRequest(url) {
                var request = new XMLHttpRequest();
                    var postDestination = url;
                    request.open("POST", postDestination, true);
                    request.setRequestHeader("Content-type", "text/plain");
                    request.onreadystatechange = function () {
                        if (request.readyState == 4 && request.status == 200) {
                            // Request done an OK!
                            return request.responseText;
                        }
                    }
                }

            
            // Get people in front

            // Get magic words

            // create QR Code
           
        </script>
    </head>
    
    <body>
        <div id="head">

        <h1>You are in the queue</h1>
            <span id="subtitle">Estimated Remaining Time:</span><br>
            
            <span id="time">(no estimate)</span><br>

            <span id="timeformat">minutes</span><br>
        </div>

        <div id="main">
            <div id="listbox">
                <div id="listheading">Waiting Information</div>
                <div id="row">
                    <div id="cellicon"><img src="person.png" id="listicon"></div>
                    <div id="celltext2">? people in front of you</div>
                </div>
                <div id="row">
                    <div id="cellicon">
                        <img src="average.jpg" id="listicon">
                    </div>
                    <div id="celltext">Average Waiting Time ~? min</div>
                </div>
                <div id="row">
                    <div id="cellicon">
                        <img src="up.png" id="listicon">
                    </div>
                    <div id="celltext">Max Time Customer</div>
                </div>
                <div id="row">
                    <div id="cellicon">
                        <img src="down.png" id="listicon">
                    </div>
                    <div id="celltext">Min Time Customer</div>
                </div>
                <div id="row">
                    <div id="qrcode" style="width: 100%; height: 100%;"></div>
                </div>
            </div>
            <div id="listbox">
            <div id="listheading">Rollercoaster Queue</div>
            <img id="landingPicture" src="achterbahn.jpg" />
            <div id="text">
                Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna
                aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren,
            </div>
            <div id="row">
                <div id="cellicon">
                    <img src="time.png" id="listicon">
                </div>
                <div id="celltext">Mo. -Fr. 08:00 - 19:00
                    <br>Sa. 09:00-13:00</div>
            </div>
            <div id="row">
                <div id="cellicon">
                    <img src="starttime.png" id="listicon">
                </div>
                <div id="celltext">You entered at 08:43:21</div>
            </div>
            </div>
            </div>

            <div id="listbox">
                <div id="listheading">Company's Name</div>
                <div id="row">
                    <div id="cellicon">
                        <img src="location.png" id="listicon">
                    </div>
                    <div id="celltext">Karlsruhe</div>
                </div>
                <div id="row">
                    <div id="cellicon">
                        <img src="web.png" id="listicon">
                    </div>
                    <div id="celltext">www.company.de</div>
                </div>
                    <div id="row">
                        <div id="cellicon">
                            <img src="email.png" id="listicon">
                        </div>
                        <div id="celltext">com.pany@example.com</div>
                    </div>
                <div id="row">
                    <div id="cellicon">
                        <img src="phone.png" id="listicon">
                    </div>
                    <div id="celltext">+049 30300 243222</div>
                </div>
            </div>

            <a href="cancel.html" onclick="" id="button">Leave Queue</a>

        </div>
       



        <script>

            // Get estimated wait time
            var waitingTime = makeRequest("https://warteschlangeapi.azurewebsites.net/api/QueueInformation/getEstimatedWaitingTime/"+qItemID);
            document.getElementById("time").innerHTML = parseInt(waitingTime) / 60;
            console.log(waitingTime);

            new QRCode(document.getElementById("qrcode"), "http://jindo.dev.naver.com/collie");
        </script>

    </body>

</html>
    
